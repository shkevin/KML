.. image:: ../_static/r_KMLSimple.png
   :width: 100px
   :align: right
   :target: https://github.com/shkevin/KML

.. _release:

===============
Release Process
===============

If substantial changes were made to the code:

#. Ensure C++ and Cython/Python integration works correctly.
#. Write any necessary examples for new code.
#. Ensure any new public interfaces have been added to the documentation

Then:

#. All tests pass on continuous integration.
#. The changelog is up-to-date and dated.
#. The version number is correct in:
    * tools/cython/kml/_version.py - This is autogenerated by `setuptools-scm <https://pypi.org/project/setuptools-scm/>`_.
#. Check for new authors: ``git log --format="%an - %ae" | sort -fu``. If new authors are found, ensure
   they are properly added.
#. Build the documentation manually and verify it is correct.
#. Tag the release: ``git tag -a x.y.z -m 'x.y.z release.'; git push --follow-tags``
#. Upload to PyPI: ``rm -rf dist; python setup.py sdist bdist_wheel; twine upload dist/*``

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; KML 0.1.0.dev1+g398244b documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/collapsible-lists/css/tree_view.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="../../../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
        <script src="../../../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #8d37d7" >
            <a href="../../../index.html" class="icon icon-home"> KML
            <img src="../../../_static/HQ 01-03-resized.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1.0.dev1+g398244b
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/about.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/about.html#about-the-project">About The Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/about.html#why-kml">Why KML?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/install.html#python">Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/modules.html">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_build/modules.html">Python API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_build/cpp_api/library_root.html">C++ API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/roadmap.html">Roadmap</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/roadmap.html#long-term-objective">Long-term Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/roadmap.html#new-functionality">New Functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/roadmap.html#maintenance-related">Maintenance Related</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/contributing.html#process-for-contributing">Process for Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/contributing.html#versioning">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/contributing.html#coding-styles">Coding Styles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/contributing.html#building-the-documentation">Building the Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/contributing.html#licensing">Licensing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/release.html">Release Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../pages/readme.html">README</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#about-the-project">About The Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#building-python-docker">Building Python Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#roadmap">Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#project-leaders">Project leaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#contributing">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#contact">Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../pages/readme.html#acknowledgments">Acknowledgments</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #8d37d7" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">KML</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/notebooks/data_structures/histograms/StreamingHistogram.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<dl>
<dt>{</dt><dd><dl>
<dt>“cells”: [</dt><dd><dl>
<dt>{</dt><dd><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“# Streaming Histogramn”,
“The streaming histogram is a data structure that takes in a single data point and updates the internal histogramn”,
“structure. This histogram is a variant of the Ben-Haim, Tom-Tov histogram.”</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: 1,
“metadata”: {},
“outputs”: [</p>
<blockquote>
<div><dl>
<dt>{</dt><dd><p>“ename”: “ModuleNotFoundError”,
“evalue”: “No module named ‘kml’”,
“output_type”: “error”,
“traceback”: [</p>
<blockquote>
<div><p>“u001b[0;31m—————————————————————————u001b[0m”,
“u001b[0;31mModuleNotFoundErroru001b[0m                       Traceback (most recent call last)”,
“u001b[0;32m&lt;ipython-input-1-637612dd3f93&gt;u001b[0m in u001b[0;36m&lt;module&gt;u001b[0;34mu001b[0mnu001b[0;32m—-&gt; 1u001b[0;31m from kml.data_structures.histograms.StreamingHistogram import (nu001b[0mu001b[1;32m      2u001b[0m     u001b[0mPyStreamingHistogramu001b[0m u001b[0;32masu001b[0m u001b[0mpyhistu001b[0mu001b[0;34m,u001b[0mu001b[0;34mu001b[0mu001b[0;34mu001b[0mu001b[0mnu001b[1;32m      3u001b[0m )nu001b[1;32m      4u001b[0m u001b[0;32mimportu001b[0m u001b[0mnumpyu001b[0m u001b[0;32masu001b[0m u001b[0mnpu001b[0mu001b[0;34mu001b[0mu001b[0;34mu001b[0mu001b[0mnu001b[1;32m      5u001b[0m u001b[0;32mimportu001b[0m u001b[0mmatplotlibu001b[0mu001b[0;34m.u001b[0mu001b[0mpyplotu001b[0m u001b[0;32masu001b[0m u001b[0mpltu001b[0mu001b[0;34mu001b[0mu001b[0;34mu001b[0mu001b[0mn”,
“u001b[0;31mModuleNotFoundErroru001b[0m: No module named ‘kml’”</p>
</div></blockquote>
<p>]</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
<p>],
“source”: [</p>
<blockquote>
<div><p>“from kml.data_structures.histograms.StreamingHistogram import (n”,
”    PyStreamingHistogram as pyhist,n”,
“)n”,
“import numpy as npn”,
“import matplotlib.pyplot as pltn”,
“n”,
“plt.style.use(&quot;tableau-colorblind10&quot;)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Define Histogram Parameters”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“num_bins = 100n”,
“window_size = 100”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Define data”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“np.random.seed(42)n”,
“data = np.random.randn(1000).flatten()”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Show distribution in batch setting”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“fig, ax = plt.subplots(1, tight_layout=True)n”,
“_ = ax.hist(data, bins=num_bins, align=&quot;mid&quot;, ec=&quot;black&quot;, alpha=0.75, linewidth=1)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Show distribution with batch in streaming histogram”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“hist = pyhist(num_bins, 1000)n”,
“n”,
“# Batch updaten”,
“hist.update(data)n”,
“n”,
“report = hist.report()n”,
“edges = np.array(list(report.keys()))n”,
“counts = np.array(list(report.values()))n”,
“n”,
“fig, ax = plt.subplots(figsize=(10, 10))n”,
“bin_edges = np.array([e[0] for e in edges])n”,
“_ = ax.bar(n”,
”    x=bin_edges[:-1],n”,
”    height=counts[:-1],n”,
”    width=np.diff(bin_edges),n”,
”    align=&quot;edge&quot;,n”,
”    ec=&quot;black&quot;,n”,
”    alpha=0.75,n”,
”    linewidth=1,n”,
“)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“# Additional Functions”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Display quantile calculation”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“### Numpy Quantile”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“np.quantile(data, 0.9)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“### Streaming Histogram Quantilen”,
“The more bins, the better the quantile calculation.”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“hist = pyhist(num_bins, 1000)n”,
“hist.update(data)n”,
“n”,
“hist.quantile(0.9)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “markdown”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“## Showcase Approximating Densityn”,
“The density calculation from the histogram isn’t bad. However, it does appear that the lower number of bins used the bettern”,
“the approximation.”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “code”,
“execution_count”: null,
“metadata”: {},
“outputs”: [],
“source”: [</p>
<blockquote>
<div><p>“import seaborn as snsn”,
“n”,
“fig, ax = plt.subplots(figsize=(10, 10))n”,
“sns.kdeplot(np.array(data), bw_method=0.5)n”,
“n”,
“hist = pyhist(20, 1000)n”,
“n”,
“# Batch updaten”,
“hist.update(data)n”,
“n”,
“report = hist.report()n”,
“edges = np.array(list(report.keys()))n”,
“counts = np.array(list(report.values()))n”,
“bin_edges = np.array([e[0] for e in edges])n”,
“n”,
“plt.plot(bin_edges, hist.pdf(True, True))n”,
“plt.legend([&quot;Seaborn Density&quot;, &quot;Histogram Density&quot;])”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “raw”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“from IPython.display import HTMLn”,
“from matplotlib import rcn”,
“import matplotlib.animation as animationn”,
“n”,
“%matplotlib inlinen”,
“rc(‘animation’, html=’html5’)”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “raw”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“window_size = 100n”,
“#num_bins = int(np.sqrt(len(data))) # 31 if data.shape[0] == 1000n”,
“num_bins = 100n”,
“n”,
“hist = pyhist(num_bins, window_size)n”,
“n”,
“fig, ax = plt.subplots()n”,
“pos = np.array(range(num_bins))n”,
“counts = np.zeros(num_bins)n”,
“width = 1n”,
“#rects = plt.bar(pos, counts, width, color=&quot;b&quot;)n”,
“n”,
“rects = ax.bar(n”,
”    pos,n”,
”    counts,n”,
”    width=1,n”,
”    align=&quot;edge&quot;,n”,
”    ec=&quot;black&quot;,n”,
”    alpha=0.75,n”,
”    linewidth=1n”,
“)n”,
“n”,
“plt.xlim([-4, 4])n”,
“plt.ylim([0, 10])n”,
“n”,
“def animate(arg, rects):n”,
”    frameno, freqs, widths = argn”,
”    for rect, f, w in zip(rects, freqs, widths):n”,
”        rect.set_height(f)n”,
”        rect.set_width(w)n”,
”        n”,
“def step():n”,
”    for i, x in enumerate(data):n”,
”        hist.update(x)n”,
”        report = hist.report()n”,
”        counts = np.array(list(report.values()))n”,
”        edges = np.array(list(report.keys()))n”,
”        widths = np.array([e[0] for e in edges])n”,
“n”,
”        yield i, counts, widthsn”,
”        n”,
“ani = animation.FuncAnimation(fig, animate, step, fargs=(rects,))”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>},
{</p>
<blockquote>
<div><p>“cell_type”: “raw”,
“metadata”: {},
“source”: [</p>
<blockquote>
<div><p>“ani”</p>
</div></blockquote>
<p>]</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>],
“metadata”: {</p>
<blockquote>
<div><dl class="simple">
<dt>“kernelspec”: {</dt><dd><p>“display_name”: “Python 3”,
“language”: “python”,
“name”: “python3”</p>
</dd>
</dl>
<p>},
“language_info”: {</p>
<blockquote>
<div><dl class="simple">
<dt>“codemirror_mode”: {</dt><dd><p>“name”: “ipython”,
“version”: 3</p>
</dd>
</dl>
<p>},
“file_extension”: “.py”,
“mimetype”: “text/x-python”,
“name”: “python”,
“nbconvert_exporter”: “python”,
“pygments_lexer”: “ipython3”,
“version”: “3.7.6”</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>},
“nbformat”: 4,
“nbformat_minor”: 5</p>
</dd>
</dl>
<p>}</p>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Kevin Cox.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>